(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"+0IA":function(e,t,a){"use strict";var n=a("FfR7"),r=a("Dthn");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("RGWf");var s=n(a("AjQT"));a("TW6w");var l=n(a("p8Va"));a("nLo3");var u=n(a("HJwI"));a("hkEy");var d=n(a("gVls"));a("2khv");var i=n(a("yATP"));a("t8Za");var c=n(a("qevM"));a("4dUJ");var o,f,k,p=n(a("3V5a")),y=n(a("b4l6")),m=n(a("0wiU")),h=n(a("SnMR")),v=n(a("GZrC")),E=n(a("nH91")),T=r(a("rdAL")),x=a("LneV"),L=n(a("zHco")),b=(o=(0,x.connect)(function(e){var t=e.system,a=e.task,n=e.loading;return{system:t,task:a,loading:n.effects["task/queryTaskList"]}}),o((k=function(e){function t(){var e,a;(0,y.default)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return a=(0,h.default)(this,(e=(0,v.default)(t)).call.apply(e,[this].concat(r))),a.state={taskList:[]},a.queryTaskList=function(){var e=a.props.dispatch;e({type:"task/queryTaskList",payload:{taskType:1}}).then(function(){var e=a.props.task;a.setState({taskList:e.taskList})})},a.handleGoAdd=function(){var e=a.props.dispatch;e({type:"task/goAddPage"})},a.handleRunTask=function(e){var t=a.props.dispatch;t({type:"task/queryTaskExcute",payload:{id:e}}).then(function(){a.queryTaskList(),a.timer=setInterval(function(){return a.queryTaskList()},1e4)})},a.handleDelTask=function(e){var t=a.props.dispatch;t({type:"task/queryTaskDelete",payload:{id:e}}).then(function(){a.queryTaskList()})},a.renderStatus=function(e){var t;switch(e){case 1:t=T.default.createElement(p.default,{status:"processing",text:"\u83b7\u53d6\u4efb\u52a1\u4fe1\u606f"});break;case 2:t=T.default.createElement(p.default,{status:"processing",text:"\u751f\u6210\u6d4b\u8bd5\u811a\u672c"});break;case 3:t=T.default.createElement(p.default,{status:"success",text:"\u6267\u884c\u5b8c\u6210"});break;case 4:t=T.default.createElement(p.default,{status:"error",text:"\u83b7\u53d6\u4efb\u52a1\u4fe1\u606f\u5931\u8d25"});break;case 5:t=T.default.createElement(p.default,{status:"error",text:"\u6267\u884c\u4efb\u52a1\u5931\u8d25"});break;default:t=T.default.createElement(p.default,{status:"default",text:"\u65b0\u4efb\u52a1"})}return t},a}return(0,E.default)(t,e),(0,m.default)(t,[{key:"componentWillMount",value:function(){this.queryTaskList()}},{key:"componentWillUnMount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){var e=this,t=this.state.taskList,a=this.props.loading,n=[{title:"\u4efb\u52a1\u540d\u79f0",dataIndex:"name",key:"name",render:function(e,t){return T.default.createElement("a",{href:"#/task/immediate/detail?".concat(t.id),style:{color:"#2e86de",fontWeight:"bold"}},e)}},{title:"\u4efb\u52a1\u63cf\u8ff0",dataIndex:"taskDesc",key:"taskDesc"},{title:"\u65b0\u5efa\u4eba",dataIndex:"add_user",key:"add_user"},{title:"\u65b0\u5efa\u65f6\u95f4",dataIndex:"add_time",key:"add_time"},{title:"\u4efb\u52a1\u72b6\u6001",dataIndex:"status",key:"status",render:function(t,a){return e.renderStatus(a.status)}},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",render:function(t,a){return T.default.createElement("div",null,0===a.status&&T.default.createElement("a",{onClick:function(){return e.handleRunTask(a.id)}},"\u5f00\u59cb\u6267\u884c"),3===a.status&&T.default.createElement("a",{style:{color:"#2e86de",fontWeight:"bold"},href:"#/task/immediate/report?".concat(a.id)},"\u67e5\u770b\u62a5\u544a"),[0,3].indexOf(a.status)>-1&&T.default.createElement(c.default,{type:"vertical"}),!([1,2].indexOf(a.status)>-1)&&T.default.createElement(i.default,{title:"\u662f\u5426\u8981\u5220\u9664\u6b64\u884c\uff1f",onConfirm:function(){return e.handleDelTask(a.id)}},T.default.createElement("a",{style:{color:"#eb2f06"}},"\u5220\u9664")))}}];return T.default.createElement(L.default,null,T.default.createElement(s.default,{bordered:!1},T.default.createElement("div",{style:{marginBottom:16}},T.default.createElement(u.default,{type:"primary",onClick:function(){return e.handleGoAdd()}},T.default.createElement(d.default,{type:"plus"}),"\u65b0\u5efa\u4efb\u52a1")),T.default.createElement(l.default,{dataSource:t,columns:n,loading:a})))}}]),t}(T.PureComponent),f=k))||f),g=b;t.default=g}}]);