(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{Sx4j:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var u=l(a("bx4M"));a("8R5B");var n=l(a("aJyg"));a("+L6B");var d=l(a("2/Rp"));a("Xi6J");var s=l(a("kl6h")),f=l(a("pVnL"));a("Pwec");var i=l(a("CtXQ")),o=l(a("lwsE")),c=l(a("W8MJ")),m=l(a("a1gu")),p=l(a("Nsbk")),y=l(a("7W2i"));a("7Kak");var h=l(a("9yH6"));a("OaEy");var v=l(a("2fM7"));a("5NDa");var E=l(a("5rEg"));a("y8nQ");var k,g,b,w,q=l(a("Vl3Y")),V=r(a("q1tI")),j=l(a("wd/R")),C=a("MuoO"),F=l(a("zHco")),H=l(a("IN2g")),T=l(a("oQmc")),L=q.default.Item,P=E.default.TextArea,x=v.default.Option,I=(h.default.Group,0),B=0,M=(k=(0,C.connect)(function(e){var t=e.system,a=e.task;return{system:t,task:a}}),g=q.default.create({onValuesChange:function(e,t,a){if(t)for(var l in t)if("project"===l){var r=a.project;console.log("projectId:",r);var u=e.dispatch;u({type:"task/queryProjectCaseList",payload:{id:r}})}}}),k(b=g((w=function(e){function t(){var e,a;(0,o.default)(this,t);for(var l=arguments.length,r=new Array(l),u=0;u<l;u++)r[u]=arguments[u];return a=(0,m.default)(this,(e=(0,p.default)(t)).call.apply(e,[this].concat(r))),a.state={projectList:[]},a.queryProjectList=function(){var e=a.props.dispatch;e({type:"system/queryProjectList",payload:{status:"1"}}).then(function(){var e=a.props.system;a.setState({projectList:e.projectList})})},a.handleBack=function(){var e=a.props.dispatch;e({type:"task/goListPage"})},a.handleSubmit=function(e){var t=a.props,l=t.dispatch,r=t.form;e.preventDefault(),r.validateFieldsAndScroll(function(e,t){if(!e){var a=(0,j.default)(t.runTime).format("HH:mm");t.runTime=a,l({type:"task/queryAddTask",payload:{info:t}})}})},a.addHeader=function(){var e=a.props.form,t=e.getFieldValue("headerkeys"),l=t.concat(++I);e.setFieldsValue({headerkeys:l})},a.addParam=function(){var e=a.props.form,t=e.getFieldValue("paramkeys"),l=t.concat(++B);e.setFieldsValue({paramkeys:l})},a.removeHeader=function(e){var t=a.props.form,l=t.getFieldValue("headerkeys");t.setFieldsValue({headerkeys:l.filter(function(t){return t!==e})})},a.removeParam=function(e){var t=a.props.form,l=t.getFieldValue("paramkeys");t.setFieldsValue({paramkeys:l.filter(function(t){return t!==e})})},a}return(0,y.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){this.queryProjectList()}},{key:"render",value:function(){var e=this,t=this.props,a=t.form,l=a.getFieldDecorator,r=a.getFieldValue,o=t.task,c=this.state.projectList,m={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},p={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};l("headerkeys",{initialValue:[]});var y=r("headerkeys"),k=y.map(function(t,a){return V.default.createElement(q.default.Item,(0,f.default)({},0===a?m:p,{label:0===a?"\u8bf7\u6c42\u5934\u53c2\u6570":"",required:!1,key:t}),l("headers[".concat(t,"]"),{validateTrigger:["onChange","onBlur"]})(V.default.createElement(H.default,null)),y.length>0?V.default.createElement(i.default,{className:T.default.dynamic_delete_button,type:"minus-circle-o",onClick:function(){return e.removeHeader(t)}}):null)});l("paramkeys",{initialValue:[]});var g=r("paramkeys"),b=g.map(function(t,a){return V.default.createElement(q.default.Item,(0,f.default)({},0===a?m:p,{label:0===a?"\u5168\u5c40\u53c2\u6570":"",required:!1,key:t}),l("params[".concat(t,"]"),{validateTrigger:["onChange","onBlur"]})(V.default.createElement(H.default,null)),g.length>0?V.default.createElement(i.default,{className:T.default.dynamic_delete_button,type:"minus-circle-o",onClick:function(){return e.removeParam(t)}}):null)});return V.default.createElement(F.default,null,V.default.createElement(u.default,{bordered:!1},V.default.createElement(q.default,{onSubmit:this.handleSubmit,hideRequiredMark:!0,style:{marginTop:8}},V.default.createElement(L,(0,f.default)({},m,{label:"\u9879\u76ee\u540d\u79f0"}),l("project",{rules:[{required:!0,message:"\u9879\u76ee\u540d\u79f0\u4e0d\u53ef\u4e3a\u7a7a"}]})(V.default.createElement(v.default,{placeholder:"\u8bf7\u5148\u9009\u62e9\u9879\u76ee",style:{width:220}},c&&c.map(function(e){return V.default.createElement(x,{value:e.id,key:e.id,title:e.name},e.name)})))),V.default.createElement(L,(0,f.default)({},m,{label:"\u4efb\u52a1\u540d\u79f0"}),l("name",{rules:[{required:!0,message:"\u4efb\u52a1\u540d\u79f0\u4e0d\u53ef\u4e3a\u7a7a"}]})(V.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0"}))),V.default.createElement(L,(0,f.default)({},m,{label:"\u4efb\u52a1\u63cf\u8ff0"}),l("taskDesc",{rules:[{required:!1}]})(V.default.createElement(P,{style:{minHeight:32},placeholder:"\u8bf7\u8f93\u5165\u4efb\u52a1\u63cf\u8ff0",rows:4}))),V.default.createElement(L,(0,f.default)({},m,{label:"\u4efb\u52a1\u7c7b\u578b"}),V.default.createElement("div",null,l("taskType",{rules:[{required:!0,message:"\u4efb\u52a1\u7c7b\u578b\u4e0d\u53ef\u4e3a\u7a7a"}],initialValue:"2"})(V.default.createElement(h.default.Group,null,V.default.createElement(h.default,{value:"1"},"\u5373\u65f6\u4efb\u52a1"),V.default.createElement(h.default,{value:"2"},"\u5b9a\u65f6\u4efb\u52a1"))),V.default.createElement(L,{style:{marginBottom:0}},l("runTime",{initialValue:(0,j.default)("12:08","HH:mm")})(V.default.createElement(s.default,{format:"HH:mm",style:{margin:"8px 0",display:"2"===r("taskType")?"block":"none"}}))))),V.default.createElement(L,(0,f.default)({},m,{label:"\u6d4b\u8bd5\u57df\u540d"}),l("domain",{rules:[{required:!0,message:"\u6d4b\u8bd5\u57df\u540d\u4e0d\u53ef\u4e3a\u7a7a"}]})(V.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165\u6d4b\u8bd5\u57df\u540d .eg: https://app.xxx.com:8080"}))),V.default.createElement(L,(0,f.default)({},m,{label:"\u4ee3\u7406\u8bbe\u7f6e"}),l("proxy",{})(V.default.createElement(E.default,{placeholder:"\u683c\u5f0f: user:password@server:port"}))),V.default.createElement(q.default.Item,{className:T.default.listForm},k,V.default.createElement(q.default.Item,p,V.default.createElement(d.default,{type:"dashed",onClick:this.addHeader,style:{width:"100%"}},V.default.createElement(i.default,{type:"plus"})," \u8bbe\u7f6e\u8bf7\u6c42\u5934\u53c2\u6570"))),V.default.createElement(q.default.Item,{className:T.default.listForm},b,V.default.createElement(q.default.Item,p,V.default.createElement(d.default,{type:"dashed",onClick:this.addParam,style:{width:"100%"}},V.default.createElement(i.default,{type:"plus"})," \u6dfb\u52a0\u5168\u5c40\u9ed8\u8ba4\u53c2\u6570"))),V.default.createElement(L,(0,f.default)({},m,{label:"\u7528\u4f8b\u8bbe\u7f6e"}),l("case",{rules:[{required:!0,message:"\u4efb\u52a1\u7528\u4f8b\u4e0d\u53ef\u4e3a\u7a7a"}]})(V.default.createElement(n.default,{dataSource:o.caseData,titles:["\u9879\u76ee\u7528\u4f8b","\u4efb\u52a1\u7528\u4f8b"],targetKeys:r("case"),render:function(e){return e.name}}))),V.default.createElement(L,(0,f.default)({},p,{style:{marginTop:32}}),V.default.createElement(d.default,{onClick:function(){return e.handleBack()}},"\u53d6\u6d88"),V.default.createElement(d.default,{type:"primary",htmlType:"submit",style:{marginLeft:8}},"\u63d0\u4ea4")))))}}]),t}(V.PureComponent),b=w))||b)||b),N=M;t.default=N}}]);